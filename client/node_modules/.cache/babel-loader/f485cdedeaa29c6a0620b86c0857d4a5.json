{"ast":null,"code":"var _jsxFileName = \"D:\\\\shoppingManagement\\\\client\\\\src\\\\components\\\\Form\\\\Form.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { TextField, Button, Typography, Paper } from \"@material-ui/core\";\nimport useStyles from \"./styles\";\nimport FileBase from \"react-file-base64\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { createProduct } from \"../../actions/products\";\nimport { updateProduct } from \"../../actions/products\";\nfunction Form({\n  currentId,\n  setCurrentId\n}) {\n  var _user$result, _user$result2;\n  const product = useSelector(state => currentId ? state.products.find(p => p._id === currentId) : null);\n  const user = JSON.parse(localStorage.getItem(\"profile\"));\n  if ((user === null || user === void 0 ? void 0 : (_user$result = user.result) === null || _user$result === void 0 ? void 0 : _user$result.role) === 1) {\n    console.log(\"this is an admin\");\n  }\n  const [productData, setProductData] = useState({\n    title: \"\",\n    description: \"\",\n    quantity: 1,\n    price: 0,\n    selectedFile: \"\"\n  });\n  const classes = useStyles();\n  useEffect(() => {\n    if (product) setProductData(product);\n  }, [product]);\n  const dispatch = useDispatch();\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (currentId) {\n      dispatch(updateProduct(currentId, productData));\n    } else {\n      dispatch(createProduct(productData));\n    }\n    clear();\n    console.log(productData);\n  };\n  const handlePriceChange = e => {\n    const value = e.target.value;\n    // Allow empty value to let users clear the field\n    if (value === \"\" || /^[0-9\\b]+(\\.[0-9\\b]*)?$/.test(value)) {\n      setProductData({\n        ...productData,\n        price: value\n      });\n    }\n  };\n  const clear = () => {\n    setCurrentId(null);\n    setProductData({\n      title: \"\",\n      description: \"\",\n      quantity: 1,\n      price: 0,\n      selectedFile: \"\"\n    });\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, (user === null || user === void 0 ? void 0 : (_user$result2 = user.result) === null || _user$result2 === void 0 ? void 0 : _user$result2.role) ? /*#__PURE__*/React.createElement(Paper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    autoComplete: \"off\",\n    noValidate: true,\n    className: `${classes.root} ${classes.form}`,\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, currentId ? \"Editing\" : \"Creating\", \" a Product\"), /*#__PURE__*/React.createElement(TextField, {\n    name: \"title\",\n    variant: \"outlined\",\n    label: \"title\",\n    fullWidth: true,\n    value: productData.title,\n    onChange: e => setProductData({\n      ...productData,\n      title: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    name: \"description\",\n    variant: \"outlined\",\n    label: \"description\",\n    fullWidth: true,\n    value: productData.description,\n    onChange: e => setProductData({\n      ...productData,\n      description: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    name: \"price\",\n    variant: \"outlined\",\n    label: \"price\",\n    fullWidth: true,\n    value: productData.price,\n    onChange: handlePriceChange,\n    inputProps: {\n      inputMode: \"decimal\",\n      pattern: \"[0-9]*[.,]?[0-9]*\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.fileInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FileBase, {\n    type: \"file\",\n    multiple: false,\n    onDone: ({\n      base64\n    }) => setProductData({\n      ...productData,\n      selectedFile: base64\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    className: classes.buttonSubmit,\n    variant: \"contained\",\n    color: \"primary\",\n    size: \"large\",\n    type: \"submit\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, \"Submit\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"secondary\",\n    size: \"small\",\n    onClick: clear,\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, \"Clear\"))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }));\n}\nexport default Form;","map":{"version":3,"names":["React","useState","useEffect","TextField","Button","Typography","Paper","useStyles","FileBase","useDispatch","useSelector","createProduct","updateProduct","Form","currentId","setCurrentId","_user$result","_user$result2","product","state","products","find","p","_id","user","JSON","parse","localStorage","getItem","result","role","console","log","productData","setProductData","title","description","quantity","price","selectedFile","classes","dispatch","handleSubmit","e","preventDefault","clear","handlePriceChange","value","target","test","createElement","Fragment","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","autoComplete","noValidate","className","root","form","onSubmit","variant","name","label","fullWidth","onChange","inputProps","inputMode","pattern","fileInput","type","multiple","onDone","base64","buttonSubmit","color","size","onClick"],"sources":["D:/shoppingManagement/client/src/components/Form/Form.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { TextField, Button, Typography, Paper } from \"@material-ui/core\";\r\nimport useStyles from \"./styles\";\r\nimport FileBase from \"react-file-base64\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { createProduct } from \"../../actions/products\";\r\nimport { updateProduct } from \"../../actions/products\";\r\n\r\nfunction Form({ currentId, setCurrentId }) {\r\n  const product = useSelector((state) =>\r\n    currentId ? state.products.find((p) => p._id === currentId) : null\r\n  );\r\n\r\n  const user = JSON.parse(localStorage.getItem(\"profile\"));\r\n\r\n  if (user?.result?.role === 1) {\r\n    console.log(\"this is an admin\");\r\n  }\r\n\r\n  const [productData, setProductData] = useState({\r\n    title: \"\",\r\n    description: \"\",\r\n    quantity: 1,\r\n    price: 0,\r\n    selectedFile: \"\",\r\n  });\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    if (product) setProductData(product);\r\n  }, [product]);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (currentId) {\r\n      dispatch(updateProduct(currentId, productData));\r\n    } else {\r\n      dispatch(createProduct(productData));\r\n    }\r\n    clear();\r\n    console.log(productData);\r\n  };\r\n\r\n  const handlePriceChange = (e) => {\r\n    const value = e.target.value;\r\n    // Allow empty value to let users clear the field\r\n    if (value === \"\" || /^[0-9\\b]+(\\.[0-9\\b]*)?$/.test(value)) {\r\n      setProductData({ ...productData, price: value });\r\n    }\r\n  };\r\n\r\n  const clear = () => {\r\n    setCurrentId(null);\r\n    setProductData({\r\n      title: \"\",\r\n      description: \"\",\r\n      quantity: 1,\r\n      price: 0,\r\n      selectedFile: \"\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {user?.result?.role ? (\r\n        <Paper>\r\n          <form\r\n            autoComplete=\"off\"\r\n            noValidate\r\n            className={`${classes.root} ${classes.form}`}\r\n            onSubmit={handleSubmit}\r\n          >\r\n            <Typography variant=\"h6\">\r\n              {currentId ? \"Editing\" : \"Creating\"} a Product\r\n            </Typography>\r\n            <TextField\r\n              name=\"title\"\r\n              variant=\"outlined\"\r\n              label=\"title\"\r\n              fullWidth\r\n              value={productData.title}\r\n              onChange={(e) =>\r\n                setProductData({ ...productData, title: e.target.value })\r\n              }\r\n            />\r\n            <TextField\r\n              name=\"description\"\r\n              variant=\"outlined\"\r\n              label=\"description\"\r\n              fullWidth\r\n              value={productData.description}\r\n              onChange={(e) =>\r\n                setProductData({ ...productData, description: e.target.value })\r\n              }\r\n            />\r\n            <TextField\r\n              name=\"price\"\r\n              variant=\"outlined\"\r\n              label=\"price\"\r\n              fullWidth\r\n              value={productData.price}\r\n              onChange={handlePriceChange}\r\n              inputProps={{\r\n                inputMode: \"decimal\",\r\n                pattern: \"[0-9]*[.,]?[0-9]*\",\r\n              }}\r\n            />\r\n            <div className={classes.fileInput}>\r\n              <FileBase\r\n                type=\"file\"\r\n                multiple={false}\r\n                onDone={({ base64 }) =>\r\n                  setProductData({ ...productData, selectedFile: base64 })\r\n                }\r\n              />\r\n            </div>\r\n            <Button\r\n              className={classes.buttonSubmit}\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"large\"\r\n              type=\"submit\"\r\n              fullWidth\r\n            >\r\n              Submit\r\n            </Button>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"small\"\r\n              onClick={clear}\r\n              fullWidth\r\n            >\r\n              Clear\r\n            </Button>\r\n          </form>\r\n        </Paper>\r\n      ) : (\r\n        <div></div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Form;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}